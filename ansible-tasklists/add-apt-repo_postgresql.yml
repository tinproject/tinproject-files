# This file install the official PostgreSQL apt repository for Debian/Ubuntu
# Docs: https://www.postgresql.org/download/linux/debian/ https://www.postgresql.org/download/linux/ubuntu/
---
# PostgreSQL Debian Repository Fingerprint=B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
- name: Install PGDG PostgreSQL repository key
  apt_key:
    url: "https://www.postgresql.org/media/keys/ACCC4CF8.asc"
    keyring: "/etc/apt/trusted.gpg.d/pgdg.gpg"
    id: "B97B0AFCAA1A47F044F244A07FCC7D46ACCC4CF8"
    state: present

- name: Install PGDG PortgreSQL repositry.
  apt_repository:
    repo: "deb http://apt.postgresql.org/pub/repos/apt/ {{ ansible_distribution_release }}-pgdg main"
    filename: "pgdg"
    mode : 0644
    state: present
    validate_certs: yes

- name: Install PGDG PortgreSQL source repositry.
  apt_repository:
    repo: "deb-src http://apt.postgresql.org/pub/repos/apt/ {{ ansible_distribution_release }}-pgdg main"
    filename: "pgdg"
    mode : 0644
    state: present
    validate_certs: yes
